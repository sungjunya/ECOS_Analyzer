# ğŸš¨ [í•„ìˆ˜] ë‰´ìŠ¤ í¬ë¡¤ë§ì„ ìœ„í•œ í‚¤ì›Œë“œ ìƒì„± (filter_query ì •ì˜) ğŸš¨
    
    # data_loader.pyì˜ get_english_name í•¨ìˆ˜ ì‚¬ìš©
    english_query_long = get_english_name(symbol) # ì˜ˆ: 'samsung electronics'
    english_query_short = english_query_long.split()[0] if english_query_long else '' # ì˜ˆ: 'samsung'

    # 2. í•„í„°ë§ í‚¤ì›Œë“œ ë¦¬ìŠ¤íŠ¸ ìƒì„± (ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ í¬í•¨)
    search_keywords = [company.lower()] # ì˜ˆ: 'ì‚¼ì„±ì „ì' (í•œê¸€)
    if english_query_long and english_query_long not in search_keywords:
        search_keywords.append(english_query_long)
    if english_query_short and english_query_short not in search_keywords:
        search_keywords.append(english_query_short)

    # filter_query ë³€ìˆ˜ ì •ì˜ (NameErrorë¥¼ í•´ê²°)
    filter_query = ' '.join(search_keywords) 

    # â”€â”€ ë„¤ì´ë²„ ê¸ˆìœµ ë‰´ìŠ¤ ê°ì„± ë¶„ì„ â”€â”€
    st.markdown("---") 
    st.markdown("### ğŸ“° Google News (êµ¬ê¸€ ë‰´ìŠ¤) ì£¼ì‹ ë‰´ìŠ¤ ê°ì„± ë¶„ì„") # ğŸš¨ ì œëª© ìˆ˜ì •
    # filter_query ë³€ìˆ˜ë¥¼ ì—¬ê¸°ì„œ ì‚¬ìš©
    st.caption(f"ê²€ìƒ‰ í‚¤ì›Œë“œ: **{filter_query.upper()}**ì— ëŒ€í•œ ìµœì‹  {10}ê°œ ë‰´ìŠ¤ ë¶„ì„") 

    if HAS_HUGGINGFACE:
        try:
            # news_scraper.pyì—ì„œ Google Newsë¥¼ í¬ë¡¤ë§í•˜ë„ë¡ ìˆ˜ì •í•œ í•¨ìˆ˜ í˜¸ì¶œ
            news_results = scrape_investing_news_titles_selenium(filter_query, max_articles=10) 
            
            if news_results:
                is_error_message = (news_results[0]['link'] == '#' and 
                                    ("ì‹¤íŒ¨" in news_results[0]['title'] or "ì—†ìŠµë‹ˆë‹¤" in news_results[0]['title']))
                
                if is_error_message:
                    st.error(news_results[0]['title'])
                else:
                    st.markdown(f"ì´ {len(news_results)}ê°œì˜ ê´€ë ¨ ë‰´ìŠ¤ë¥¼ ë¶„ì„í–ˆìŠµë‹ˆë‹¤.")
                    
                    for item in news_results:
                        title = item['title']
                        link = item['link']
                        
                        # ê°ì„± ë¶„ì„ ìˆ˜í–‰
                        sentiment, confidence, color = get_sentiment(title, tokenizer, model, device, label_map)

                        confidence_pct = f"{confidence * 100:.2f}%"
                        
                        st.markdown(f"""
                        <div style='padding: 8px 12px; margin-bottom: 8px; border-radius: 6px; 
                                    border-left: 5px solid {color}; background-color: #1E1E1E;'>
                            <span style='font-size: 0.9em; font-weight: bold; color: {color}; margin-right: 10px;'>
                                [{sentiment}] ({confidence_pct})
                            </span>
                            <a href='{link}' target='_blank' style='text-decoration: none; color: #DDDDDD;'>
                                {title}
                            </a>
                        </div>
                        """, unsafe_allow_html=True)

            else:
                st.info(f"'{company}'ì— ëŒ€í•œ ìµœì‹  ë‰´ìŠ¤ ê¸°ì‚¬ë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.")

        except NameError as e:
            st.error(f"ê°ì„± ë¶„ì„ ëª¨ë¸ ë¡œë“œ ì˜¤ë¥˜: {e}. 'load_sentiment_model', 'get_sentiment' í•¨ìˆ˜ ì •ì˜ë¥¼ í™•ì¸í•˜ì„¸ìš”.")

        except Exception as e:
            st.error(f"ë‰´ìŠ¤ ê°ì„± ë¶„ì„ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}")

    else:
        st.error("Hugging Face (transformers, torch) ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ì•¼ ì´ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.")